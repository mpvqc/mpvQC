# SPDX-FileCopyrightText: mpvQC developers
#
# SPDX-License-Identifier: MIT

[project]
name = "mpvQC"
version = "0.9.0-beta"
description = "libmpv based application for quality control of videos"
requires-python = ">=3.13"
readme = "README.MD"
dependencies = [
    "inject>=5.3.0",
    "Jinja2>=3.1.6",
    "mpv>=1.0.8",
    "PySide6-Essentials==6.9.1",
    "pywin32>=311; sys_platform == 'win32'",
]
classifiers = [
    "Development Status :: 4 - Beta",                           # 4 - Beta, 5 - Production/Stable
    "License :: OSI Approved :: GNU General Public License v3",
    "Programming Language :: Python :: 3.13",
    "Private :: Do Not Upload",
]

[dependency-groups]
dev = [
    "pytest>=8.4.1",
    "materialyoucolor>=2.0.10",
]

[project.urls]
Homepage = "https://mpvqc.github.io"
Repository = "https://github.com/mpvqc/mpvQC"
Issues = "https://github.com/mpvqc/mpvQC/issues"

[tool.ruff]
line-length = 120
target-version = "py313"

[tool.ruff.lint]
preview = true
extend-select = [
    "F",    # Pyflakes – basic errors like unused imports, undefined names
    "FLY",  # Flynt – suggests f-string conversion
    "I",    # Isort – enforces import sorting
    "PERF", # Performance – flags suboptimal code patterns
    "PGH",  # Pygrep-hooks – enforces commit hook conventions (if any)
    "FURB", # Refurb – style suggestions from the `refurb` tool
    "PL",   # Pylint – a broad range of static analysis rules
    "S",    # Bandit – security issues (e.g. eval, subprocess, etc.)
    "UP",   # Upgrade – flags code that could use newer Python features

    # flake8
    "EM",   # Error Messages – ensures proper string formatting in exception messages
    "C",    # Cyclomatic complexity (mccabe) – flags overly complex code
    "CPY",  # Copyright – checks for required copyright notices
    "DTZ",  # datetime-timezone – flags naive datetime usage
    "EXE",  # Executable – checks for shebangs and file permissions
    "FA",   # Future Annotations – flags issues with postponed evaluation of annotations
    "FIX",  # Fixme – flags TODO, FIXME, and similar comments
    "G",    # Logging – ensures proper usage of logging practices
    "ICN",  # Import Conventions – checks for naming and import rules
    "ISC",  # Implicit String Concatenation – disallows adjacent string literals without +
    "LOG",  # Logging Format – flags improper logging string formatting
    "PIE",  # Pie – miscellaneous Python code style improvements
    "PYI",  # Pyi – rules for stub (`.pyi`) files
    "PT",   # Pytest – checks for pytest best practices
    "Q",    # Quotes – enforces consistent quote style
    "RSE",  # Raise – flags incorrect `raise` statements
    "RET",  # Return – flags redundant or inconsistent return statements
    "SLF",  # Self – restricts access to private members
    "SIM",  # Simplify – flags code that can be simplified
    "SLOT", # Slots – enforces use of `__slots__` where appropriate
    "TID",  # Tidiness – general code tidiness rules
    "TD",   # TODO – flags TODO comments with optional enforcement
    "TC",   # Type-checking – ensures proper usage of `TYPE_CHECKING` blocks
    "ARG",  # Unused Arguments – flags unused function arguments
    "PTH",  # Pathlib – encourages use of `pathlib` over `os.path`
]

ignore = [
    "PLC0415", # `import` should be at top of file
    "PLC1901", # Simplifiable string comparisons
    "PLR0904", # Too many public methods
    "PLR0911", # Too many return statements
    "PLR0913", # Too many arguments
    "PLR0914", # Too many local variables
    "PLR0917", # Too many positional arguments
    "PLR6301", # Method could be a function
    "PLW0108", # Statement has no effect
]

[tool.ruff.lint.extend-per-file-ignores]
"test/**" = [ # Adjust rules for test files
    "S101", # Allow `assert` in tests
    "ARG",  # Ignore unused arguments (common in fixtures)
    "FBT",  # Ignore boolean positional argument check (e.g. in parametrize)
    "SLF",  # Ignore access to private members
    "PLR",  # Ignore complexity/readability issues
]

"**/test_*.py" = [
    # Adjust rules for test files
    "S101", # Allow `assert` in tests
]

[tool.ruff.lint.isort]
known-first-party = ["mpvqc", "rc_project"]

[tool.ruff.lint.flake8-copyright]
notice-rgx = "SPDX-FileCopyrightText: mpvQC developers"

[tool.pyside6-project]
files = [
    # WARNING! This list is auto updated by the just build helper
    "data/config/backup-template.jinja",
    "data/config/export-template.jinja",
    "data/config/input.conf",
    "data/config/mpv-linux.conf",
    "data/config/mpv-windows.conf",
    "data/fonts/NotoSans-Bold.ttf",
    "data/fonts/NotoSans-Italic.ttf",
    "data/fonts/NotoSans-Regular.ttf",
    "data/fonts/NotoSans-SemiBold.ttf",
    "data/fonts/NotoSansHebrew-Bold.ttf",
    "data/fonts/NotoSansHebrew-Regular.ttf",
    "data/fonts/NotoSansHebrew-SemiBold.ttf",
    "data/fonts/NotoSansMono-Regular.ttf",
    "data/icon.svg",
    "data/icons/aspect_ratio_black_24dp.svg",
    "data/icons/close_black_24dp.svg",
    "data/icons/close_fullscreen_black_24dp.svg",
    "data/icons/comment_black_24dp.svg",
    "data/icons/content_copy_black_24dp.svg",
    "data/icons/delete_black_24dp.svg",
    "data/icons/done_black_24dp.svg",
    "data/icons/download_black_24dp.svg",
    "data/icons/edit_black_24dp.svg",
    "data/icons/exit_to_app_black_24dp.svg",
    "data/icons/expand_more_black_24dp.svg",
    "data/icons/file_open_black_24dp.svg",
    "data/icons/info_black_24dp.svg",
    "data/icons/inventory_black_24dp.svg",
    "data/icons/keyboard_arrow_down_black_24dp.svg",
    "data/icons/keyboard_arrow_left_black_24dp.svg",
    "data/icons/keyboard_arrow_right_black_24dp.svg",
    "data/icons/keyboard_arrow_up_black_24dp.svg",
    "data/icons/keyboard_backspace_black_24dp.svg",
    "data/icons/keyboard_black_24dp.svg",
    "data/icons/keyboard_return_black_24dp.svg",
    "data/icons/language_black_24dp.svg",
    "data/icons/launch_black_24dp.svg",
    "data/icons/minimize_black_24dp.svg",
    "data/icons/movie_black_24dp.svg",
    "data/icons/movie_edit_black_24dp.svg",
    "data/icons/notes_black_24dp.svg",
    "data/icons/open_in_full_black_24dp.svg",
    "data/icons/palette_black_24dp.svg",
    "data/icons/play_arrow_black_24dp.svg",
    "data/icons/save_alt_black_24dp.svg",
    "data/icons/save_as_black_24dp.svg",
    "data/icons/save_black_24dp.svg",
    "data/icons/settings_backup_restore_black_24dp.svg",
    "data/icons/shortcut_black_24dp.svg",
    "data/icons/space_bar_black_24dp.svg",
    "data/icons/subtitles_black_24dp.svg",
    "data/icons/title_black_24dp.svg",
    "data/icons/update_black_24dp.svg",
    "data/icons/upload_black_24dp.svg",
    "data/icons/vertical_split_black_24dp.svg",
    "i18n/de-DE.ts",
    "i18n/es-MX.ts",
    "i18n/he-IL.ts",
    "i18n/it-IT.ts",
    "i18n/pt-PT.ts",
    "main.py",
    "mpvqc/__init__.py",
    "mpvqc/application.py",
    "mpvqc/controllers/__init__.py",
    "mpvqc/controllers/about_controller.py",
    "mpvqc/decorators.py",
    "mpvqc/injections.py",
    "mpvqc/logging.py",
    "mpvqc/models.py",
    "mpvqc/pyobjects/__init__.py",
    "mpvqc/pyobjects/application_paths.py",
    "mpvqc/pyobjects/backend_backupper.py",
    "mpvqc/pyobjects/backend_manager.py",
    "mpvqc/pyobjects/comment_model/__init__.py",
    "mpvqc/pyobjects/comment_model/item.py",
    "mpvqc/pyobjects/comment_model/model.py",
    "mpvqc/pyobjects/comment_model/roles.py",
    "mpvqc/pyobjects/comment_model/searcher.py",
    "mpvqc/pyobjects/comment_model/undo.py",
    "mpvqc/pyobjects/comment_model/utils.py",
    "mpvqc/pyobjects/comment_type_validator.py",
    "mpvqc/pyobjects/export_template_model.py",
    "mpvqc/pyobjects/extended_document_exporter.py",
    "mpvqc/pyobjects/player.py",
    "mpvqc/pyobjects/player_files.py",
    "mpvqc/pyobjects/player_framebuffer_object.py",
    "mpvqc/pyobjects/player_properties.py",
    "mpvqc/pyobjects/player_win_id.py",
    "mpvqc/pyobjects/settings.py",
    "mpvqc/pyobjects/utility.py",
    "mpvqc/pyobjects/version_checker.py",
    "mpvqc/services/__init__.py",
    "mpvqc/services/application_environment.py",
    "mpvqc/services/application_paths.py",
    "mpvqc/services/comment_type_validator.py",
    "mpvqc/services/document_exporter.py",
    "mpvqc/services/document_importer.py",
    "mpvqc/services/file_startup.py",
    "mpvqc/services/font_loader.py",
    "mpvqc/services/formatter_time.py",
    "mpvqc/services/frameless/__init__.py",
    "mpvqc/services/frameless/linux/__init__.py",
    "mpvqc/services/frameless/linux/event.py",
    "mpvqc/services/frameless/service.py",
    "mpvqc/services/frameless/win/__init__.py",
    "mpvqc/services/frameless/win/c_structures.py",
    "mpvqc/services/frameless/win/event.py",
    "mpvqc/services/frameless/win/utils.py",
    "mpvqc/services/i18n.py",
    "mpvqc/services/key_command.py",
    "mpvqc/services/mimetype_provider.py",
    "mpvqc/services/operating_system_zoom_detector.py",
    "mpvqc/services/player.py",
    "mpvqc/services/resource.py",
    "mpvqc/services/resource_reader.py",
    "mpvqc/services/reverse_translator.py",
    "mpvqc/services/settings.py",
    "mpvqc/services/type_mapper.py",
    "mpvqc/services/version_checker.py",
    "mpvqc/services/video_selector.py",
    "mpvqc/startup.py",
    "project.qrc",
    "qt/qml/Main.qml",
    "qt/qml/app/MpvqcApplication.qml",
    "qt/qml/app/MpvqcBackupper.qml",
    "qt/qml/app/MpvqcContent.qml",
    "qt/qml/app/MpvqcContentController.qml",
    "qt/qml/app/MpvqcContentDialogLoader.qml",
    "qt/qml/app/MpvqcContentFileDialogLoader.qml",
    "qt/qml/app/MpvqcContentMessageBoxLoader.qml",
    "qt/qml/app/MpvqcFileDropArea.qml",
    "qt/qml/app/MpvqcLabelWidthCalculator.qml",
    "qt/qml/app/MpvqcNewCommentMenu.qml",
    "qt/qml/app/MpvqcQuitHandler.qml",
    "qt/qml/app/MpvqcResizeHandler.qml",
    "qt/qml/app/MpvqcWindowVisibilityHandler.qml",
    "qt/qml/app/qmldir",
    "qt/qml/app/tst_MpvqcContentController.qml",
    "qt/qml/app/tst_MpvqcContentDialogLoader.qml",
    "qt/qml/app/tst_MpvqcContentFileDialogLoader.qml",
    "qt/qml/app/tst_MpvqcContentMessageBoxLoader.qml",
    "qt/qml/app/tst_MpvqcFileDropArea.qml",
    "qt/qml/app/tst_MpvqcLabelWidthCalculator.qml",
    "qt/qml/app/tst_MpvqcNewCommentMenu.qml",
    "qt/qml/app/tst_MpvqcQuitHandler.qml",
    "qt/qml/app/tst_MpvqcResizeHandler.qml",
    "qt/qml/app/tst_MpvqcWindowVisibilityHandler.qml",
    "qt/qml/dialogs/MpvqcDialogExportDocument.qml",
    "qt/qml/dialogs/MpvqcDialogImportDocuments.qml",
    "qt/qml/dialogs/MpvqcDialogImportSubtitles.qml",
    "qt/qml/dialogs/MpvqcDialogImportVideo.qml",
    "qt/qml/dialogs/MpvqcMessageBoxDocumentNotCompatible.qml",
    "qt/qml/dialogs/MpvqcMessageBoxExtendedExport.qml",
    "qt/qml/dialogs/MpvqcMessageBoxExtendedExportError.qml",
    "qt/qml/dialogs/MpvqcMessageBoxNewDocument.qml",
    "qt/qml/dialogs/MpvqcMessageBoxQuit.qml",
    "qt/qml/dialogs/MpvqcMessageBoxVersionCheck.qml",
    "qt/qml/dialogs/MpvqcMessageBoxVideoFound.qml",
    "qt/qml/dialogs/about/MpvqcAboutDialogView.qml",
    "qt/qml/dialogs/appearance/MpvqcAppearanceDialogController.qml",
    "qt/qml/dialogs/appearance/MpvqcAppearanceDialogView.qml",
    "qt/qml/dialogs/backup/MpvqcBackupView.qml",
    "qt/qml/dialogs/backup/MpvqcDialogBackup.qml",
    "qt/qml/dialogs/backup/tst_MpvqcBackupView.qml",
    "qt/qml/dialogs/commenttypes/MpvqcCommentTypesView.qml",
    "qt/qml/dialogs/commenttypes/MpvqcCommentTypesViewController.qml",
    "qt/qml/dialogs/commenttypes/MpvqcDialogCommentTypes.qml",
    "qt/qml/dialogs/commenttypes/MpvqcInputComponent.qml",
    "qt/qml/dialogs/commenttypes/MpvqcInputControls.qml",
    "qt/qml/dialogs/commenttypes/MpvqcInputTextField.qml",
    "qt/qml/dialogs/commenttypes/MpvqcList.qml",
    "qt/qml/dialogs/commenttypes/MpvqcListControls.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcCommentTypesViewController.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcInputComponent.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcInputControls.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcInputTextField.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcList.qml",
    "qt/qml/dialogs/commenttypes/tst_MpvqcListControls.qml",
    "qt/qml/dialogs/editinput/MpvqcDialogEditInput.qml",
    "qt/qml/dialogs/editinput/MpvqcEditInputView.qml",
    "qt/qml/dialogs/editinput/tst_MpvqcDialogEditInput.qml",
    "qt/qml/dialogs/editmpv/MpvqcDialogEditMpv.qml",
    "qt/qml/dialogs/editmpv/MpvqcEditMpvView.qml",
    "qt/qml/dialogs/editmpv/tst_MpvqcDialogEditMpv.qml",
    "qt/qml/dialogs/export/MpvqcDialogExport.qml",
    "qt/qml/dialogs/export/MpvqcExportView.qml",
    "qt/qml/dialogs/export/tst_MpvqcExportView.qml",
    "qt/qml/dialogs/import/MpvqcDialogImport.qml",
    "qt/qml/dialogs/import/MpvqcImportView.qml",
    "qt/qml/dialogs/import/tst_MpvqcImportView.qml",
    "qt/qml/dialogs/qmldir",
    "qt/qml/dialogs/shortcuts/MpvqcDialogShortcuts.qml",
    "qt/qml/dialogs/shortcuts/MpvqcShortcut.qml",
    "qt/qml/dialogs/shortcuts/MpvqcShortcutButton.qml",
    "qt/qml/dialogs/shortcuts/MpvqcShortcutFilterModel.qml",
    "qt/qml/dialogs/shortcuts/MpvqcShortcutModel.qml",
    "qt/qml/dialogs/shortcuts/MpvqcShortcutView.qml",
    "qt/qml/dialogs/tst_MpvqcDialogExportDocument.qml",
    "qt/qml/dialogs/tst_MpvqcDialogImportDocuments.qml",
    "qt/qml/dialogs/tst_MpvqcDialogImportSubtitles.qml",
    "qt/qml/dialogs/tst_MpvqcDialogImportVideo.qml",
    "qt/qml/footer/MpvqcFooterController.qml",
    "qt/qml/footer/MpvqcFooterView.qml",
    "qt/qml/footer/qmldir",
    "qt/qml/footer/tst_MpvqcFooterController.qml",
    "qt/qml/header/MpvqcAppHeaderController.qml",
    "qt/qml/header/MpvqcAppHeaderView.qml",
    "qt/qml/header/qmldir",
    "qt/qml/header/tst_MpvqcAppHeaderController.qml",
    "qt/qml/manager/MpvqcManager.qml",
    "qt/qml/manager/MpvqcStateReducer.js",
    "qt/qml/manager/MpvqcTypes.js",
    "qt/qml/manager/qmldir",
    "qt/qml/manager/tst_MpvqcStateReducer.qml",
    "qt/qml/models/MpvqcCreditsModel.qml",
    "qt/qml/models/MpvqcLanguageModel.qml",
    "qt/qml/models/MpvqcLibraryModel.qml",
    "qt/qml/models/MpvqcThemeMaterialYou.qml",
    "qt/qml/models/MpvqcThemeMaterialYouDark.qml",
    "qt/qml/models/qmldir",
    "qt/qml/player/MpvqcPlayer.qml",
    "qt/qml/player/qmldir",
    "qt/qml/shared/MpvqcDebugRectangle.qml",
    "qt/qml/shared/MpvqcDialog.qml",
    "qt/qml/shared/MpvqcDialog2.qml",
    "qt/qml/shared/MpvqcHeader.qml",
    "qt/qml/shared/MpvqcKeyboardFocusableButtonBox.qml",
    "qt/qml/shared/MpvqcMenu.qml",
    "qt/qml/shared/MpvqcMessageBox.qml",
    "qt/qml/shared/MpvqcObject.qml",
    "qt/qml/shared/MpvqcSpinBoxRow.qml",
    "qt/qml/shared/MpvqcSwitchRow.qml",
    "qt/qml/shared/MpvqcTextFieldRow.qml",
    "qt/qml/shared/MpvqcTooltip.qml",
    "qt/qml/shared/qmldir",
    "qt/qml/shared/tst_MpvqcMenu.qml",
    "qt/qml/shared/tst_MpvqcSpinBoxRow.qml",
    "qt/qml/shared/tst_MpvqcSwitchRow.qml",
    "qt/qml/shared/tst_MpvqcTextFieldRow.qml",
    "qt/qml/table/MpvqcCommentHighlighter.js",
    "qt/qml/table/MpvqcCommentList.qml",
    "qt/qml/table/MpvqcCommentListDelegate.qml",
    "qt/qml/table/MpvqcContextMenu.qml",
    "qt/qml/table/MpvqcDeleteCommentMessageBox.qml",
    "qt/qml/table/MpvqcEditCommentPopup.qml",
    "qt/qml/table/MpvqcEditCommentTypeMenu.qml",
    "qt/qml/table/MpvqcEditTimePopup.qml",
    "qt/qml/table/MpvqcPlaceholder.qml",
    "qt/qml/table/MpvqcSearchBox.qml",
    "qt/qml/table/MpvqcTable.qml",
    "qt/qml/table/qmldir",
    "qt/qml/table/tst_MpvqcCommentList.qml",
    "qt/qml/themes/MpvqcTheme.qml",
    "qt/qml/themes/MpvqcThemeRegistry.qml",
    "qt/qml/themes/qmldir",
]
